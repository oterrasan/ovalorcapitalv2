<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ao Vivo - O Valor Capital</title>
  <meta name="description" content="Transmissões e canais oficiais ao vivo (Brasil e mundo)." />
  <style>
    :root {
      --bg: #0b0f14;
      --card: #0f172a;
      --muted: #94a3b8;
      --text: #e5e7eb;
      --accent: #0b3b60;
      --border: rgba(148,163,184,.18);
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;background:var(--bg);color:var(--text)}
    a{color:inherit;text-decoration:none}
    .container{max-width:1200px;margin:0 auto;padding:20px}
    header{border-bottom:1px solid var(--border);background:linear-gradient(180deg, rgba(11,59,96,.35), transparent)}
    .top{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap}
    .brand{display:flex;align-items:center;gap:12px}
    .brand b{letter-spacing:.4px}
    .pill{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--border);padding:8px 12px;border-radius:999px;background:rgba(15,23,42,.6);color:var(--muted)}
    nav{display:flex;gap:10px;flex-wrap:wrap}
    nav a{border:1px solid var(--border);padding:8px 12px;border-radius:999px;color:var(--muted)}
    nav a:hover{color:var(--text);border-color:rgba(148,163,184,.35)}
    h1{font-size:28px;margin:18px 0 6px}
    p.lead{margin:0 0 18px;color:var(--muted)}
    .section-title{margin:26px 0 10px;font-size:16px;color:var(--muted);text-transform:uppercase;letter-spacing:.08em}
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:16px}
    .card{grid-column:span 6;background:rgba(15,23,42,.75);border:1px solid var(--border);border-radius:14px;overflow:hidden}
    .card header{padding:12px 14px;border-bottom:1px solid var(--border);background:rgba(2,6,23,.35)}
    .card header .name{font-weight:650}
    .card header .hint{font-size:12px;color:var(--muted);margin-top:2px}
    .frame{aspect-ratio:16/9;background:#000}
    iframe{width:100%;height:100%;border:0}
    .footer-note{margin-top:18px;color:var(--muted);font-size:13px}
    @media (max-width: 900px){.card{grid-column:span 12}}
  </style>
</head>
<body>
<header>
  <div class="container">
    <div class="top">
      <div class="brand">
        <b>O VALOR CAPITAL</b>
        <span class="pill">Ao Vivo • Canais oficiais</span>
      </div>
      <nav>
        <a href="/">Home</a>
        <a href="/hub/">Hub</a>
        <a href="/ferramentas/">Ferramentas</a>
      </nav>
    </div>
    <h1>Ao Vivo</h1>
    <p class="lead">Transmissões oficiais (Brasil e mundo). Se um canal estiver offline, o player pode exibir a página do canal.</p>
  </div>
</header>

<div class="container" id="live-root"></div>

<script>
(async function() {
  const root = document.getElementById('live-root');
  const resp = await fetch('/data/live_channels.json', {cache:'no-store'}).catch(()=>null);
  const data = resp && resp.ok ? await resp.json() : [];
  const bySection = new Map();
  for (const ch of data) {
    const key = ch.section || 'Canais';
    if (!bySection.has(key)) bySection.set(key, []);
    bySection.get(key).push(ch);
  }
  for (const [section, items] of bySection.entries()) {
    const h = document.createElement('div');
    h.className='section-title';
    h.textContent=section;
    root.appendChild(h);

    const grid=document.createElement('div');
    grid.className='grid';
    for (const ch of items) {
      const card=document.createElement('div');
      card.className='card';
      const head=document.createElement('header');
      head.innerHTML = `<div class="name">${ch.name}</div><div class="hint">Embed: ${ch.type==='video'?'YouTube vídeo':'YouTube canal (live_stream)'} • Fonte: oficial</div>`;
      const frame=document.createElement('div');
      frame.className='frame';
      const iframe=document.createElement('iframe');
      iframe.loading='lazy';
      iframe.allow='accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share';
      iframe.allowFullscreen=true;
      iframe.referrerPolicy='origin-when-cross-origin';
      iframe.src = ch.type==='video'
        ? `https://www.youtube.com/embed/${ch.id}?rel=0&modestbranding=1`
        : `https://www.youtube.com/embed/live_stream?channel=${ch.id}&autoplay=0&mute=1&rel=0&modestbranding=1`;
      frame.appendChild(iframe);

      card.appendChild(head);
      card.appendChild(frame);
      grid.appendChild(card);
    }
    root.appendChild(grid);
  }

  const note=document.createElement('div');
  note.className='footer-note';
  note.textContent='Dica: você pode adicionar/editar canais em /data/live_channels.json (e fazer commit no GitHub) sem mexer no layout desta página.';
  root.appendChild(note);
})();
</script>
</body>
</html>
